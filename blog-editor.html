<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Blog Editor - Vitalora</title>
  <link rel="stylesheet" href="styles.css?v=2" />
  <link rel="stylesheet" href="/assets/css/header.css?v=1">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300..700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/assets/css/fonts.css?v=12">
  <style>
    :root{--brand:#3A9AEA;--ink:#0f172a;--muted:#64748b}
    body{background:#f3f6fb; margin: 0; font-family: 'Quicksand', sans-serif;}
    
    .editor-container {
      max-width: 1000px;
      margin: 0 auto;
      padding: 24px;
    }
    
    .editor-header {
      background: white;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 24px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    }
    
    .editor-title {
      font-size: 28px;
      font-weight: 700;
      color: #1f2937;
      margin: 0 0 8px 0;
    }
    
    .editor-subtitle {
      color: #6b7280;
      font-size: 16px;
      margin: 0;
    }
    
    .editor-form {
      background: white;
      border-radius: 12px;
      padding: 32px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    }
    
    .form-group {
      margin-bottom: 24px;
    }
    
    .form-label {
      display: block;
      font-weight: 600;
      color: #374151;
      margin-bottom: 8px;
      font-size: 14px;
    }
    
    .form-input {
      width: 100%;
      padding: 12px 16px;
      border: 1px solid #d1d5db;
      border-radius: 8px;
      font-size: 16px;
      box-sizing: border-box;
      font-family: inherit;
    }
    
    .form-input:focus {
      outline: none;
      border-color: #3b82f6;
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }
    
    .form-row {
      display: flex;
      gap: 16px;
    }
    
    .form-row .form-group {
      flex: 1;
    }
    
    .editor-toolbar {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      padding: 16px;
      background: #f9fafb;
      border: 1px solid #d1d5db;
      border-bottom: none;
      border-radius: 8px 8px 0 0;
    }
    
    .toolbar-btn {
      width: 40px;
      height: 40px;
      border: none;
      background: transparent;
      border-radius: 6px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-weight: 600;
      color: #6b7280;
      transition: all 0.2s ease;
    }
    
    .toolbar-btn:hover {
      background: #e5e7eb;
      color: #374151;
    }
    
    .toolbar-btn.active {
      background: #10b981;
      color: white;
    }
    
    .editor-content {
      width: 100%;
      min-height: 400px;
      padding: 20px;
      border: 1px solid #d1d5db;
      border-radius: 0 0 8px 8px;
      font-family: inherit;
      font-size: 16px;
      line-height: 1.6;
      resize: vertical;
      box-sizing: border-box;
    }
    
    .editor-actions {
      display: flex;
      gap: 12px;
      justify-content: flex-end;
      margin-top: 24px;
      padding-top: 24px;
      border-top: 1px solid #e5e7eb;
    }
    
    .btn {
      padding: 12px 24px;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      font-size: 14px;
      text-decoration: none;
      display: inline-block;
      text-align: center;
    }
    
    .btn-primary {
      background: #3b82f6;
      color: white;
    }
    
    .btn-primary:hover {
      background: #2563eb;
    }
    
    .btn-outline {
      background: transparent;
      color: #6b7280;
      border: 1px solid #d1d5db;
    }
    
    .btn-outline:hover {
      background: #f9fafb;
    }
    
    .back-link {
      color: #6b7280;
      text-decoration: none;
      font-size: 14px;
      margin-bottom: 16px;
      display: inline-block;
    }
    
    .back-link:hover {
      color: #374151;
    }
    
    @media (max-width: 768px) {
      .editor-container {
        padding: 16px;
      }
      
      .form-row {
        flex-direction: column;
        gap: 0;
      }
      
      .editor-actions {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="site-header" role="banner">
    <div class="header-inner">
      <a class="logo" href="/">
        <span class="logo-text">Vitalora.nl</span>
      </a>
      
      <div class="header-buttons">
        <!-- Header buttons removed for editor -->
      </div>
    </div>
  </header>

  <div class="editor-container">
    <a href="/personeel-dashboard" class="back-link">‚Üê Terug naar dashboard</a>
    
    <div class="editor-header">
      <h1 class="editor-title">Blog Inhoud</h1>
      <p class="editor-subtitle">Maak een nieuwe blog post</p>
    </div>
    
    <form class="editor-form">
      <div class="form-group">
        <label class="form-label">Titel</label>
        <input type="text" class="form-input" id="blog-title" placeholder="Voer blog titel in">
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label class="form-label">URL</label>
          <input type="text" class="form-input" id="blog-slug" placeholder="blog-url">
        </div>
        <div class="form-group">
          <label class="form-label">Revisies</label>
          <select class="form-input" id="blog-revisions">
            <option>Toon revisies</option>
          </select>
        </div>
      </div>
      
      <div class="form-group">
        <label class="form-label">Meta Titel</label>
        <input type="text" class="form-input" id="blog-meta-title" placeholder="SEO titel voor zoekmachines">
      </div>
      
      <div class="form-group">
        <label class="form-label">Meta Beschrijving</label>
        <textarea class="form-input" id="blog-meta-description" rows="3" placeholder="SEO beschrijving voor zoekmachines (max 160 karakters)"></textarea>
      </div>
      
      <div class="form-group">
        <label class="form-label">Inhoud</label>
        <div class="editor-toolbar">
          <button type="button" class="toolbar-btn" title="Vet">B</button>
          <button type="button" class="toolbar-btn" title="Cursief">I</button>
          <button type="button" class="toolbar-btn" title="Onderstreept">U</button>
          <button type="button" class="toolbar-btn" title="Normale Tekst">P</button>
          <button type="button" class="toolbar-btn" title="Kop 1">H1</button>
          <button type="button" class="toolbar-btn" title="Kop 2">H2</button>
          <button type="button" class="toolbar-btn" title="Kop 3">H3</button>
          <button type="button" class="toolbar-btn" title="Kop 4">H4</button>
          <button type="button" class="toolbar-btn" title="Citaat">"</button>
          <button type="button" class="toolbar-btn" title="Afbeelding Toevoegen">üñºÔ∏è</button>
        </div>
        <textarea class="editor-content" id="blog-content" placeholder="Begin met het schrijven van je blog post..."></textarea>
      </div>
      
      <div class="editor-actions">
        <button type="button" class="btn btn-outline" id="save-draft">Concept Opslaan</button>
        <button type="button" class="btn btn-outline" id="schedule-blog">Inplannen</button>
        <button type="button" class="btn btn-primary" id="publish-blog">Publiceren</button>
      </div>
    </form>
  </div>

  <script>
    (function(){
      // Check if user has access
      const key='staff_access_ok';
      if(localStorage.getItem(key)!=='1'){ 
        window.location.href='/personeel'; 
        return; 
      }
      
      // Get elements
      const blogTitle = document.getElementById('blog-title');
      const blogSlug = document.getElementById('blog-slug');
      const blogMetaTitle = document.getElementById('blog-meta-title');
      const blogMetaDescription = document.getElementById('blog-meta-description');
      const blogContent = document.getElementById('blog-content');
      const saveDraftBtn = document.getElementById('save-draft');
      const scheduleBtn = document.getElementById('schedule-blog');
      const publishBtn = document.getElementById('publish-blog');
      
      // Auto-generate URL from title
      blogTitle.addEventListener('input', function() {
        const slug = this.value
          .toLowerCase()
          .replace(/[^a-z0-9\s-]/g, '')
          .replace(/\s+/g, '-')
          .replace(/-+/g, '-')
          .trim('-');
        blogSlug.value = slug;
        
        // Auto-fill meta title if empty
        if (!blogMetaTitle.value) {
          blogMetaTitle.value = this.value;
        }
      });
      
      // Toolbar functionality
      document.querySelectorAll('.toolbar-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          const command = this.title.toLowerCase();
          const textarea = blogContent;
          const start = textarea.selectionStart;
          const end = textarea.selectionEnd;
          const selectedText = textarea.value.substring(start, end);
          const beforeText = textarea.value.substring(0, start);
          const afterText = textarea.value.substring(end);
          
          let newText = '';
          
          switch(command) {
            case 'bold':
              newText = beforeText + '**' + selectedText + '**' + afterText;
              break;
            case 'italic':
              newText = beforeText + '*' + selectedText + '*' + afterText;
              break;
            case 'underline':
              newText = beforeText + '<u>' + selectedText + '</u>' + afterText;
              break;
            case 'normal text':
              newText = beforeText + selectedText + afterText;
              break;
            case 'heading 1':
              newText = beforeText + '# ' + selectedText + afterText;
              break;
            case 'heading 2':
              newText = beforeText + '## ' + selectedText + afterText;
              break;
            case 'heading 3':
              newText = beforeText + '### ' + selectedText + afterText;
              break;
            case 'heading 4':
              newText = beforeText + '#### ' + selectedText + afterText;
              break;
            case 'quote':
              newText = beforeText + '> ' + selectedText + afterText;
              break;
            case 'add image':
              const imageUrl = prompt('Voer afbeelding URL in:');
              if (imageUrl) {
                newText = beforeText + '![Image](' + imageUrl + ')' + afterText;
              } else {
                return; // Don't change text if user cancels
              }
              break;
          }
          
          textarea.value = newText;
          textarea.focus();
          
          // Set cursor position after the inserted text
          const newCursorPos = start + (newText.length - textarea.value.length + (newText.length - beforeText.length - afterText.length));
          textarea.setSelectionRange(newCursorPos, newCursorPos);
        });
      });
      
      // Save as draft
      saveDraftBtn.addEventListener('click', function() {
        const title = blogTitle.value.trim();
        const slug = blogSlug.value.trim();
        const metaTitle = blogMetaTitle.value.trim();
        const metaDescription = blogMetaDescription.value.trim();
        const content = blogContent.value.trim();
        
        if (!title) {
          alert('Vul de titel in');
          return;
        }
        
        console.log('Saving draft:', { title, slug, metaTitle, metaDescription, content, status: 'draft' });
        alert('Concept succesvol opgeslagen!');
        window.location.href = '/personeel-dashboard';
      });
      
      // Schedule blog
      scheduleBtn.addEventListener('click', function() {
        const title = blogTitle.value.trim();
        const slug = blogSlug.value.trim();
        const metaTitle = blogMetaTitle.value.trim();
        const metaDescription = blogMetaDescription.value.trim();
        const content = blogContent.value.trim();
        
        if (!title || !content) {
          alert('Vul titel en inhoud in');
          return;
        }
        
        const scheduleDate = prompt('Voer datum en tijd in (YYYY-MM-DD HH:MM):');
        if (!scheduleDate) return;
        
        console.log('Scheduling blog:', { title, slug, metaTitle, metaDescription, content, status: 'scheduled', publishDate: scheduleDate });
        alert('Blog succesvol ingepland!');
        window.location.href = '/personeel-dashboard';
      });
      
      // Publish blog
      publishBtn.addEventListener('click', function() {
        const title = blogTitle.value.trim();
        const slug = blogSlug.value.trim();
        const metaTitle = blogMetaTitle.value.trim();
        const metaDescription = blogMetaDescription.value.trim();
        const content = blogContent.value.trim();
        
        if (!title || !content) {
          alert('Vul titel en inhoud in');
          return;
        }
        
        if (confirm('Weet je zeker dat je deze blog post wilt publiceren?')) {
          console.log('Publishing blog:', { title, slug, metaTitle, metaDescription, content, status: 'published' });
          alert('Blog succesvol gepubliceerd!');
          window.location.href = '/personeel-dashboard';
        }
      });
      
    })();
  </script>
</body>
</html>
